schema: '2.0'
stages:
  prepare_data:
    cmd: mkdir -p prepared_data && uv run src/prepare_data.py
    deps:
    - path: data/test.csv
      hash: md5
      md5: 7533b82eae4b582610cbd68aa636b017
      size: 28629
    - path: data/train.csv
      hash: md5
      md5: 2309cc5f04782ed9bb6016d9f4e381cf
      size: 61194
    - path: src/prepare_data.py
      hash: md5
      md5: 4806532f7e687a6bc29799133b318e0c
      size: 2071
    params:
      params.yaml:
        data.random_seed: 42
        data.val_split: 0.15
    outs:
    - path: prepared_data/
      hash: md5
      md5: 64446be3de925416a0dd12f5e6d3d81d.dir
      size: 224483
      nfiles: 3
  train:
    cmd: uv run src/train.py
    deps:
    - path: prepared_data/
      hash: md5
      md5: 64446be3de925416a0dd12f5e6d3d81d.dir
      size: 224483
      nfiles: 3
    - path: src/train.py
      hash: md5
      md5: 730c9084c9f93a7ad27ee1392b509c9f
      size: 884
  tune_hparams:
    cmd: uv run src/tune_hparams.py
    deps:
    - path: prepared_data/
      hash: md5
      md5: 64446be3de925416a0dd12f5e6d3d81d.dir
      size: 224483
      nfiles: 3
    - path: src/tune_hparams.py
      hash: md5
      md5: a778a69383f725d8eec1344fcbb627b5
      size: 1707
    params:
      params.yaml:
        training.n_trials: 40
  predict:
    cmd: uv run src/generate_predictions.py
    deps:
    - path: prepared_data/
      hash: md5
      md5: 64446be3de925416a0dd12f5e6d3d81d.dir
      size: 224483
      nfiles: 3
    - path: src/generate_predictions.py
      hash: md5
      md5: d432738de1ddf91352d3ad68dd7ef312
      size: 637
    params:
      params.yaml:
        model.svc:
          C: 0.64535
          kernel: rbf
          gamma: 0.0487
          degree: 1
  data_to_tensors:
    cmd: mkdir -p tensor_data && uv run src/data_to_tensors.py
    deps:
    - path: prepared_data/
      hash: md5
      md5: 64446be3de925416a0dd12f5e6d3d81d.dir
      size: 224483
      nfiles: 3
    - path: src/data_to_tensors.py
      hash: md5
      md5: 089fd1901dde6ba9d7315a91c8879f9d
      size: 799
    outs:
    - path: tensor_data/
      hash: md5
      md5: 9baba9c5b6483bb63ec6ba7b429cd347.dir
      size: 135642
      nfiles: 2
  train_nn:
    cmd: uv run src/train_nn.py
    deps:
    - path: src/model.py
      hash: md5
      md5: e97057b22b44b73dd14f6d7d3f2edf15
      size: 2676
    - path: src/train_nn.py
      hash: md5
      md5: 6e0079737f6304d1a37e78c49d47efee
      size: 1156
    - path: tensor_data/
      hash: md5
      md5: 9baba9c5b6483bb63ec6ba7b429cd347.dir
      size: 135642
      nfiles: 2
    params:
      params.yaml:
        model.nn:
          lr: 0.05
          momentum: 0.9
  tune_nn:
    cmd: uv run src/tune_nn.py
    deps:
    - path: src/model.py
      hash: md5
      md5: e97057b22b44b73dd14f6d7d3f2edf15
      size: 2676
    - path: src/tune_nn.py
      hash: md5
      md5: 3ab7b071e2a8ea1d5d518bb6af87b2e4
      size: 2527
    - path: tensor_data/
      hash: md5
      md5: 9baba9c5b6483bb63ec6ba7b429cd347.dir
      size: 135642
      nfiles: 2
